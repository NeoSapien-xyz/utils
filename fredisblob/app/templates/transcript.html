{% extends "base.html" %}
{% block content %}
  <div class="max-w-3xl mx-auto bg-white shadow rounded p-6 mt-4">
    <h1 class="text-2xl font-bold mb-4">Transcript Viewer</h1>

    <!-- üì§ Upload Form -->
    <form id="transcriptForm" method="post" action="/transcript/" enctype="multipart/form-data">
      <input type="file" name="file" accept=".json" class="block mb-4">
      <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Upload</button>
    </form>

    <!-- ‚è≥ Loader -->
    <div id="loader" class="hidden text-center mt-6">
      <div class="inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-500"></div>
      <p class="mt-2 text-gray-600">Parsing transcript... one moment.</p>
    </div>

    {% if error %}
      <div class="mt-4 text-red-600 font-semibold">‚ö†Ô∏è Error: {{ error }}</div>
    {% endif %}

    {% if transcript %}
      <div class="mt-6 whitespace-pre-wrap bg-gray-50 p-4 rounded border border-gray-200 font-mono text-sm leading-relaxed">
        {{ transcript }}
      </div>
    {% endif %}
  </div>

  <!-- üß† Inline JS -->
  <script>
    document.getElementById('transcriptForm').addEventListener('submit', function () {
      document.getElementById('transcriptForm').classList.add('hidden');
      document.getElementById('loader').classList.remove('hidden');
    });
  </script>
{% endblock %}

